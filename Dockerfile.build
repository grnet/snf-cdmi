FROM maven:3.2-jdk-7

RUN adduser --disabled-password --gecos '' snfcdmi

ENV APPHOME /home/snfcdmi
WORKDIR $APPHOME
ADD pom.xml $APPHOME/
RUN chown -R snfcdmi:snfcdmi .

RUN ls -al
RUN su -c 'mvn dependency:resolve' snfcdmi

ADD . $APPHOME/
RUN chown -R snfcdmi:snfcdmi . && ls -al

CMD su -c 'mvn -e package' snfcdmi

